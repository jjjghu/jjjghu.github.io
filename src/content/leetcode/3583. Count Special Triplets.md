---
category: "leetcode"

title: "3583. 統計特殊三元組"
en_title: "3583. Count Special Triplets"

problem_id: "3583"
difficulty: "medium"
tags: ["array", "hash table", "counting"]

link: "https://leetcode.cn/problems/count-special-triplets"
en_link: "https://leetcode.com/problems/count-special-triplets"
date: "2025-12-09"
---
## 思路
當一個數字左右邊數字都要比自己大兩倍的時候，這三個數字就算一組特殊三元組。\
所以對一個數字`x`來說，一共有「左邊`2x`出現的次數」乘上「右邊`2x`出現的次數」這麼多個特殊三元組。\
由於數字的範圍是 $0 \leq nums[i] \leq 10^5$，用數組紀錄即可。
## 程式碼
### 哈希表
```cpp
class Solution {
public:
    int specialTriplets(vector<int>& nums) {
        const int MOD = 1e9+7;
        const int MX = 1e5;
        int n = nums.size();
        int freq[MX + 1]{};
        vector<int> left(n, 0); // 在自己左邊的數字, 有幾個是自己兩倍
        vector<int> right(n, 0); // 在自己右邊的數字, 有幾個是自己的兩倍
        // 計算left陣列
        for(int i = 0; i < n; ++i) {
            if(nums[i] * 2 <= MX) {
                left[i] = freq[nums[i] * 2];
            }
            freq[nums[i]]++;
        }
        memset(freq, 0, sizeof(freq));
        // 計算 right 陣列
        for(int i = n - 1; i >= 0; --i) {
            if(nums[i] * 2 <= MX) {
                right[i] = freq[nums[i] * 2];
            }
            freq[nums[i]]++;
        }
        // 計算答案
        long long res = 0;
        for(int i = 0; i < n; ++i) {
            res += 1LL * left[i] * right[i];
            res %= MOD;
        }
        return res %= MOD;
    }
};
```
## 複雜度分析
- 時間複雜度：$O(n)$
- 空間複雜度：$O(n)$
<!-- 由於 discord 不支援 latex, 因此都不去使用 -->

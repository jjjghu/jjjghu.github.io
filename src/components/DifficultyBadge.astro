---
import { getDifficultyColor, getDifficultyLabel } from "../utils/difficulty";

interface Props {
    difficulty?: string | null;
}

const { difficulty } = Astro.props;

// 如果沒有難度 (例如 ZeroJudge)，就不渲染
if (!difficulty) {
    return;
}

const colorObj = getDifficultyColor(difficulty);
const labelCN = getDifficultyLabel(difficulty, false); // 預設中文
const labelEN = getDifficultyLabel(difficulty, true); // 英文

const cssVars = {
    "--badge-color-dark": colorObj.dark,
    "--badge-color-light": colorObj.light,
};
---

<span
    class="badge"
    data-variant="difficulty"
    style={cssVars}
    data-cn={labelCN}
    data-en={labelEN}
>
    {labelCN}
</span>

<style>
    .badge[data-variant="difficulty"] {
        --badge-bg: color-mix(
            in srgb,
            var(--badge-color-dark) 10%,
            transparent
        );
        --badge-border: color-mix(
            in srgb,
            var(--badge-color-dark) 20%,
            transparent
        );
        --badge-fg: var(--badge-color-dark);
    }
    .badge[data-variant="difficulty"]:hover {
        --badge-bg-hover: color-mix(
            in srgb,
            var(--badge-color-dark) 20%,
            transparent
        );
    }
    :global(.light) .badge[data-variant="difficulty"] {
        --badge-fg: var(--badge-color-light);
        --badge-border: color-mix(
            in srgb,
            var(--badge-color-light) 80%,
            transparent
        );
        --badge-bg: color-mix(
            in srgb,
            var(--badge-color-light) 10%,
            transparent
        );
    }
</style>
